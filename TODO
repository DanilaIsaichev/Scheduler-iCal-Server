Порядок действий:

Получить запрос

Считать класс, даты и уроки

    Открыть файл
    
        Если не существует -> создать

    Прочитать события

    Отсортировать события по датам

    Добавить события 

        Если события существуют, то обновить данные в массиве
        
    Записать в файл